{"version":3,"file":"contact-B0163h4H.js","sources":["../../src/js/contact.js"],"sourcesContent":["import { auth, functions } from './firebase-config.js';\nimport { getFirestore, collection, addDoc } from 'firebase/firestore';\nimport { httpsCallable } from 'firebase/functions';\n\nconst db = getFirestore();\nconst contactForm = document.getElementById('contactForm');\nconst submitBtn = document.querySelector('.submit-btn');\n\ncontactForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    \n    // Disable submit button while processing\n    submitBtn.disabled = true;\n    submitBtn.textContent = 'Sending...';\n    \n    const name = document.getElementById('name').value.trim();\n    const email = document.getElementById('email').value.trim();\n    const message = document.getElementById('message').value.trim();\n\n    try {\n        // Validate inputs\n        if (!name || !email || !message) {\n            throw new Error('Please fill in all fields');\n        }\n\n        // Create message object\n        const messageData = {\n            name,\n            email,\n            message,\n            timestamp: new Date(),\n            userId: auth.currentUser?.uid || 'anonymous',\n            status: 'unread'\n        };\n\n        // Add to Firestore\n        const docRef = await addDoc(collection(db, 'messages'), messageData);\n\n        // Send notification with better error handling\n        try {\n            const notifyAdmin = httpsCallable(functions, 'notifyAdmin');\n            const result = await notifyAdmin({\n                messageId: docRef.id,\n                sender: name,\n                preview: message.substring(0, 100)\n            });\n\n            if (!result.data.success) {\n                console.warn('Notification not sent:', result.data.error);\n            }\n        } catch (notifyError) {\n            console.error('Notification error:', notifyError);\n            // Continue since message is saved\n        }\n\n        // Success\n        alert('Message sent successfully!');\n        contactForm.reset();\n\n    } catch (error) {\n        console.error('Error details:', error);\n        alert(error.message || 'Failed to send message. Please try again.');\n    } finally {\n        // Re-enable submit button\n        submitBtn.disabled = false;\n        submitBtn.textContent = 'Send Message';\n    }\n});\n\n// Add real-time validation\nconst inputs = contactForm.querySelectorAll('input, textarea');\ninputs.forEach(input => {\n    input.addEventListener('input', () => {\n        input.setCustomValidity('');\n        input.checkValidity();\n    });\n\n    input.addEventListener('invalid', () => {\n        if (input.value.trim() === '') {\n            input.setCustomValidity('This field is required');\n        }\n    });\n});\n"],"names":["db","getFirestore","contactForm","submitBtn","name","email","message","messageData","_a","auth","docRef","addDoc","collection","result","httpsCallable","functions","notifyError","error","inputs","input"],"mappings":"+IAIA,MAAMA,EAAKC,EAAc,EACnBC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAY,SAAS,cAAc,aAAa,EAEtDD,EAAY,iBAAiB,SAAU,MAAO,GAAM,OAChD,EAAE,eAAgB,EAGlBC,EAAU,SAAW,GACrBA,EAAU,YAAc,aAExB,MAAMC,EAAO,SAAS,eAAe,MAAM,EAAE,MAAM,KAAM,EACnDC,EAAQ,SAAS,eAAe,OAAO,EAAE,MAAM,KAAM,EACrDC,EAAU,SAAS,eAAe,SAAS,EAAE,MAAM,KAAM,EAE/D,GAAI,CAEA,GAAI,CAACF,GAAQ,CAACC,GAAS,CAACC,EACpB,MAAM,IAAI,MAAM,2BAA2B,EAI/C,MAAMC,EAAc,CAChB,KAAAH,EACA,MAAAC,EACA,QAAAC,EACA,UAAW,IAAI,KACf,SAAQE,EAAAC,EAAK,cAAL,YAAAD,EAAkB,MAAO,YACjC,OAAQ,QACX,EAGKE,EAAS,MAAMC,EAAOC,EAAWZ,EAAI,UAAU,EAAGO,CAAW,EAGnE,GAAI,CAEA,MAAMM,EAAS,MADKC,EAAcC,EAAW,aAAa,EACzB,CAC7B,UAAWL,EAAO,GAClB,OAAQN,EACR,QAASE,EAAQ,UAAU,EAAG,GAAG,CACjD,CAAa,EAEIO,EAAO,KAAK,SACb,QAAQ,KAAK,yBAA0BA,EAAO,KAAK,KAAK,CAE/D,OAAQG,EAAa,CAClB,QAAQ,MAAM,sBAAuBA,CAAW,CAE5D,CAGQ,MAAM,4BAA4B,EAClCd,EAAY,MAAO,CAEtB,OAAQe,EAAO,CACZ,QAAQ,MAAM,iBAAkBA,CAAK,EACrC,MAAMA,EAAM,SAAW,2CAA2C,CAC1E,QAAc,CAENd,EAAU,SAAW,GACrBA,EAAU,YAAc,cAChC,CACA,CAAC,EAGD,MAAMe,EAAShB,EAAY,iBAAiB,iBAAiB,EAC7DgB,EAAO,QAAQC,GAAS,CACpBA,EAAM,iBAAiB,QAAS,IAAM,CAClCA,EAAM,kBAAkB,EAAE,EAC1BA,EAAM,cAAe,CAC7B,CAAK,EAEDA,EAAM,iBAAiB,UAAW,IAAM,CAChCA,EAAM,MAAM,KAAI,IAAO,IACvBA,EAAM,kBAAkB,wBAAwB,CAE5D,CAAK,CACL,CAAC"}